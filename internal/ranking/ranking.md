# 排行榜

## 如何排名

1. 记录每个分数的用户数,通过计算高于当前用户分数的用户总数可以得到用户的大致排名基数；在该系统中有 10001 [0,10000]个分数排名
2. 在同一个分数中按照用户分数的更新时间排序得到同一分数的排名
3. 分数的排名基数+同一分数的排名可以得到用户的真实排名

## 如何更新

1. 用户取得新的分数，原有分数的用户数 需要减一
2. 最新分数的用户数加一，同时更新分数获取时间

## 如何查询

### 如何查询自身排名

1. 获取用户分数
2. 根据用户分数获得排名基数
3. 获取用户同一分数且更新时间小于用户分数最后更新时间的用户数
4. 基数+用户数+1 得到当前用户排名

### 如何查询其他用户

1. 与当前在统一分数的前后都有 10个及以上, 直接获取，统一分数排名-10，排名+10
2. 前面部分同一分数不足10人，则需要获取更高分数用户的排名
3. 后面部同一分数不足10人，则需要获取更低分数的用户


